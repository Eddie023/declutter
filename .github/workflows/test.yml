name: CI 
on: [push]

jobs: 
    build:
        name: Test 
        runs-on: ubuntu-latest

        steps:
            - name: Checkout
              uses: actions/checkout@v1

            - name: Set up Docker Buildx
              uses: docker/setup-buildx-action@v2

            - name: Cache Docker layers
              uses: actions/cache@v3
              with:
                path: /tmp/.buildx-cache
                key: ${{ runner.os }}-buildx-${{ github.sha }}
                restore-keys: ${{ runner.os }}-buildx-
            
            - name: Run linter 
              run: make lint 
            
            - name: Run unit tests
              run: make test 
            
            - name: Build 
              run: make build 